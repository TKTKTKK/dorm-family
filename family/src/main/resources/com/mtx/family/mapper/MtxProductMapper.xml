<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mtx.family.mapper.MtxProductMapper">

    <resultMap id="selectResultMap" type="com.mtx.family.entity.MtxProduct">
    </resultMap>

    <select id="selectMxtProductList" resultMap="selectResultMap">
        select *
        from tb_mtx_product
        where TRUE
        <if test="mxtProduct.name != null and mxtProduct.name != ''">
            and name like concat("%",#{mxtProduct.name},"%")
        </if>
        <if test="mxtProduct.model != null and mxtProduct.model != ''">
            and model =#{mxtProduct.model}
        </if>
        <if test="mxtProduct.status != null and mxtProduct.status != ''">
            and status = #{mxtProduct.status}
        </if>
        <if test="flag =='1'.toString()">
            and type = 'PRODUCT'
        </if>
        <if test="flag =='0'.toString()">
            and type = 'EXCHANGE_GOOD'
        </if>
        order by modifyon desc;
    </select>
    <select id="validModelIsExist" resultMap="selectResultMap">
        select *
        from tb_mtx_product
        where TRUE
        <if test="model != null and model != ''">
            and model =#{model}
        </if>
        <if test="uuid != null and uuid != ''">
            and uuid != #{uuid}
        </if>
;
    </select>
    <select id="getAllModel" resultType="java.lang.String">
        select DISTINCT model
        from tb_mtx_product
        where model is not null and model!=''
        and type='PRODUCT'
        ;
    </select>
</mapper>