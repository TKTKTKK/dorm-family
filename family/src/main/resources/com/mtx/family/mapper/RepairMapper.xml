<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mtx.family.mapper.RepairMapper">

    <resultMap id="selectResultMap" type="com.mtx.family.entity.Repair">
    </resultMap>

    <select id="selectRepairForSnnoRepeat" resultMap="selectResultMap">
        select mr.*
        from tb_mtx_repair mr
        where
        1=1
        <if test="repair.snno != null and repair.snno != ''">
            and mr.snno = #{repair.snno}
        </if>
        <if test="repair.uuid != null and repair.uuid != ''">
            and mr.uuid != #{repair.uuid}
        </if>
        ;
    </select>

    <select id="selectRepairList" resultMap="selectResultMap">
        select mr.*
        from tb_mtx_repair mr
        where
        1=1
        <if test="repair.snno != null and repair.snno != ''">
            and mr.snno like concat("%",#{repair.snno},"%")
        </if>
        <if test="startTime != null and startTime != ''">
            <![CDATA[
                              and mr.traindt >= #{startTime}
                            ]]>
        </if>
        <if test="endTime != null and endTime != ''">
            <![CDATA[
                              and mr.traindt <= #{endTime}
                            ]]>
        </if>
        order by mr.modifyon desc
    </select>

    <select id="selectRepairListForPhone" resultMap="selectResultMap">
        select mr.*
        from tb_mtx_repair mr
        order by mr.modifyon desc
    </select>

</mapper>